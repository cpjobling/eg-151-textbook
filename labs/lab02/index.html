<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr Timothy Davies">
<meta name="author" content="Dr Chris P. Jobling">
<meta name="dcterms.date" content="2024-10-25">

<title>Experiment 2: Digital Input – EG-151 Microcontrollers 2024-2025</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../labs/lab03/index.html" rel="next">
<link href="../../labs/lab01/index.html" rel="prev">
<link href="../../logo.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="application/json" class="js-hypothesis-config">
{
  "theme": "clean",
  "openSidebar": false
}
</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../labs/index.html">Microcontroller Programming Laboratory</a></li><li class="breadcrumb-item"><a href="../../labs/lab02/index.html"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Experiment 2: Digital Input</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">EG-151 Microcontrollers 2024-2025</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/cpjobling/eg-151-textbook/tree/main/website/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">EG-151 Microcontrollers</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Course Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../intro/course_aims.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Aims</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../intro/course_delivery.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Delivery Method</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../lectures/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Microcontrollers Lectures</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">EG-151 Microcontrollers—Module Staff</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week01/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction to Microcontrollers and Microcontroller Architecture</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/data_representation/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introduction to Data Representation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week02/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Architecture of the Atmel ATmega 328 Microcontroller</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week03/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Introduction to Programming and Program Development</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week04/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Introduction to Programming with C</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week05/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Interfacing to digital I/O with C</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week06/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Interfacing to Analogue I/O with C</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week07/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Introduction to Assembly Language</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week08/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Microcontroller Architecture – Program Operation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week09/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Addressing Modes</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../lab_intro/intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Laboratory Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/assessment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Assessment of the Laboratory Introduction</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/lab_work.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Laboratory Work in the Department of Electronic and Electrical Engineering</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/lab_instruments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Laboratory Instruments</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/lab_safety.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Laboratory Safety</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/experiment0.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Experiment: to construct an oscillator</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/simulation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Simulation Exercise</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/questions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Questions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/construction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Construction Exercise - Continuity Tester</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/soldering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Safe Soldering</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../labs/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Microcontroller Programming Laboratory</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/get_started/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Getting Started</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/lab01/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Experiment 1: Binary Counter</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/lab02/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Experiment 2: Digital Input</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/lab03/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Experiment 3: Analogue to Digital Conversion</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/lab04/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Experiment 4: Arrays</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/lab05/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Experiment 5: LCD Display Panel</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../projects/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mini Projects</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../projects/voltmeter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Voltmeter</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../projects/range_finder.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Ultrasonic Range Finder</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../projects/clock_timer.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Clock Time</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../projects/weather_station.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Weather Station</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../appendix/appendix_a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Other Data Representations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../appendix/programming_in_c.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Programming in C – from nothing to software</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#connecting-a-switch-to-a-port" id="toc-connecting-a-switch-to-a-port" class="nav-link active" data-scroll-target="#connecting-a-switch-to-a-port">Connecting a switch to a port</a></li>
  <li><a href="#using-a-switch-in-a-programme" id="toc-using-a-switch-in-a-programme" class="nav-link" data-scroll-target="#using-a-switch-in-a-programme">Using a switch in a programme</a></li>
  <li><a href="#lets-go-faster" id="toc-lets-go-faster" class="nav-link" data-scroll-target="#lets-go-faster">Let’s go faster</a></li>
  <li><a href="#sec-section-5" id="toc-sec-section-5" class="nav-link" data-scroll-target="#sec-section-5">An exercise for the reader…</a></li>
  <li><a href="#assessment-of-experiment-2" id="toc-assessment-of-experiment-2" class="nav-link" data-scroll-target="#assessment-of-experiment-2">Assessment of Experiment 2</a></li>
  <li><a href="#code-listings-and-flow-charts" id="toc-code-listings-and-flow-charts" class="nav-link" data-scroll-target="#code-listings-and-flow-charts">Code Listings and Flow-Charts</a>
  <ul class="collapse">
  <li><a href="#binary-counter-with-stopstart-control" id="toc-binary-counter-with-stopstart-control" class="nav-link" data-scroll-target="#binary-counter-with-stopstart-control">Binary counter with stop/start control</a></li>
  <li><a href="#wokwi-simulation-of-binary-counter-with-stopstart-control" id="toc-wokwi-simulation-of-binary-counter-with-stopstart-control" class="nav-link" data-scroll-target="#wokwi-simulation-of-binary-counter-with-stopstart-control">Wokwi simulation of binary counter with stop/start control</a></li>
  <li><a href="#binary-counter-with-stopstart-and-turbo-button" id="toc-binary-counter-with-stopstart-and-turbo-button" class="nav-link" data-scroll-target="#binary-counter-with-stopstart-and-turbo-button">Binary counter with stop/start and turbo button</a></li>
  </ul></li>
  <li><a href="#photograph-of-experiment-2" id="toc-photograph-of-experiment-2" class="nav-link" data-scroll-target="#photograph-of-experiment-2">Photograph of Experiment 2</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/cpjobling/eg-151-textbook/edit/main/website/labs/lab02/index.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/cpjobling/eg-151-textbook/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../labs/index.html">Microcontroller Programming Laboratory</a></li><li class="breadcrumb-item"><a href="../../labs/lab02/index.html"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Experiment 2: Digital Input</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-lab-2" class="quarto-section-identifier"><span class="chapter-title">Experiment 2: Digital Input</span></span></h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Authors</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Dr Timothy Davies </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Department of Electronic and Electrical Engineering
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Dr Chris P. Jobling </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Department of Electronic and Electrical Engineering
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 25, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>All the program examples in <a href="../lab01">Experiment 1</a> dealt with digital output, and we learned how to set the bits in the Data Direction Register (DDR) to make designated ports work as outputs. In Experiment 2 we shall look at digital inputs.</p>
<div id="tbl-1-ddr-inputs" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-1-ddr-inputs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;22.1: DDR for setting six outputs
</figcaption>
<div aria-describedby="tbl-1-ddr-inputs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th>DDRC7</th>
<th>DDRC6</th>
<th>DDRC5</th>
<th>DDRC4</th>
<th>DDRC3</th>
<th>DDRC2</th>
<th>DDRC1</th>
<th>DDRC0</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>Referring to <a href="#tbl-1-ddr-inputs" class="quarto-xref">Table&nbsp;<span>22.1</span></a>, the bits set to logic “1” in <code>DDRC</code> correspond to physical ports set as outputs.</p>
<p><strong>Question</strong>: <em>What about the bits set to logic “0”?</em></p>
<p><strong><em>Answer</em></strong>: The physical ports are inputs, and can be connected to devices outside the microcontroller, for example switches and sensors.</p>
<p><strong>Question</strong>: <em>How is the logic state of a port accessed by the microcontroller?</em></p>
<p><strong><em>Answer</em></strong>: By reading from the corresponding port number. The ports on our Nano board are a maximum of 8 bits wide, so a read from the port returns a value between 0 and 255 (<span class="math inline">\(2^8 - 1\)</span>).</p>
<p><strong>Question</strong>: <em>Supposing there are several digital inputs on a particular port. How can we distinguish between one input and another?</em></p>
<p><strong><em>Answer:</em></strong> <em>There are several ways of doing this, but they are all based on the idea of masking.</em></p>
<p>In the following example, imagine that there is a physical switch connected to Port C, bit 7. A read from Port C returns the state of all the bits from 0 to 7. In order to isolate just bit 7, we use a mask and a decision.</p>
<div id="tbl-2-mask" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-2-mask-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;22.2: Applying a mask to a register to access a particular value
</figcaption>
<div aria-describedby="tbl-2-mask-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th><strong>Value read from Port</strong></th>
<th>0 or 1</th>
<th>1</th>
<th>0</th>
<th>0</th>
<th>1</th>
<th>0</th>
<th>1</th>
<th>1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Mask</strong></td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>Value AND Mask</strong></td>
<td>0 or 1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>The last row of <a href="#tbl-2-mask" class="quarto-xref">Table&nbsp;<span>22.2</span></a> shows the result of an AND operation on the value read and the mask. So, a decision zero/non-zero will be exclusive to the bit that was masked.</p>
<p>The Arduino version of “C” includes some commands which allow individual bits to be interrogated. The mask operation is still there but it is “behind the scenes”.</p>
<section id="connecting-a-switch-to-a-port" class="level2">
<h2 class="anchored" data-anchor-id="connecting-a-switch-to-a-port">Connecting a switch to a port</h2>
<p>How do we connect a switch to a port pin? There are various possibilities as shown in <a href="#fig-ex2-1" class="quarto-xref">Figure&nbsp;<span>22.1</span></a>.</p>
<div id="fig-ex2-1" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Illustration of the three ways to connect a switch to a port.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ex2-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/switch_to_port_connections.png" class="img-fluid figure-img" alt="Illustration of the three ways to connect a switch to a port.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ex2-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;22.1: Three ways to connect a switch to a port.
</figcaption>
</figure>
</div>
<p>Option “A” looks good, but there are several problems. It requires a “change over” switch, with connections to both contacts. In addition, when the switch is in motion from “0” to “1” there is a brief period when the port voltage is undefined, which can result in unpredictable operation. For example, it could be seen as multiple operations of the switch.</p>
<p>Option “B” is much better. It only requires a “single pole” switch, which is the usual configuration for a keyboard. In addition, the voltage on the port is always defined; logic “0” when the switch is open, logic “1” when it is closed.</p>
<p>Option “C” has the same advantages as option “B”, though of course the switch action is reversed – logic “1” when the switch is open, logic “0” when the switch is closed. Historically, switch inputs on digital circuits tend to be of this type, which is known as “active low” switching. In fact, this option is supported by the internal hardware of the microcontroller, which has built-in resistors so all that is required is an external switch connected between the port and logic “0”.</p>
<p>This is the case for the hardware that we are using and is illustrated in <a href="#fig-ex2-2" class="quarto-xref">Figure&nbsp;<span>22.2</span></a>.</p>
<div id="fig-ex2-2" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Connecting a switch to a microcontroller.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ex2-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/active_low_switching.png" class="img-fluid figure-img" alt="Connecting a switch to a microcontroller.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ex2-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;22.2: Active low switching for a microcontroller.
</figcaption>
</figure>
</div>
<p>Each port has an associated pull-up register, which allows individual bits of the port to be “tied” to logic “1” through a high-value resistor. Different families of microcontrollers have different mechanisms for achieving this. In the demonstration programthat follows, the input pull-up resistors are enabled by a Arduino specific instruction, <code>pinMode().</code> Another microcontroller used in our undergraduate labs, the “AW60”, has special registers called “pull-up enable” registers to perform the same task.</p>
</section>
<section id="using-a-switch-in-a-programme" class="level2">
<h2 class="anchored" data-anchor-id="using-a-switch-in-a-programme">Using a switch in a programme</h2>
<p>The demonstration program illustrated as a flow-chart in <a href="#fig-lab2-flow-chart" class="quarto-xref">Figure&nbsp;<span>22.4</span></a> in <a href="#lst-ex2-1" class="quarto-xref">Listing&nbsp;<span>22.1</span></a> is, in fact, the very first program we tried in Experiment 1. There is one refinement; a switch is tested and if the logic input is “0”, the counter does not advance. Notice the <code>pinMode()</code> instruction in <code>setup()</code>, which turns on the internal pull-up resistor. This is a one-off instruction at the start of program execution.</p>
<p>Create an Arduino sketch, and copy/paste the code from <a href="#lst-ex2-1" class="quarto-xref">Listing&nbsp;<span>22.1</span></a> into it.</p>
<p>The testing of the switch input could be done using an Arduino-specific instruction, <code>digitalRead()</code>, but for the sake of completeness here is how it can be done using a port read and a logical “and” operation. The designated port is port D, bit 2. Note the use of the exclamation mark (“!”); “!=” means “does not equal”.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1"></a><span class="cf">if</span> <span class="op">((</span>PIND <span class="op">&amp;</span> <span class="bn">0b00000100</span><span class="op">)</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> </span>
<span id="cb1-2"><a href="#cb1-2"></a>  counter2<span class="op">++;</span> </span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This will work with a wide range of different microcontrollers and “C” compilers. Note the use of the ampersand (“&amp;”) which is the logical “and” operation. The equivalent using an Arduino specific command is as follows:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb2-1"><a href="#cb2-1"></a><span class="cf">if</span> <span class="op">(</span> digitalRead<span class="op">(</span><span class="dv">2</span><span class="op">)</span> <span class="op">!=</span> <span class="dv">0</span> <span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>    counter2<span class="op">++;</span></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The argument of the <code>digitalRead()</code>operation, 2, is part of the “shorthand” used by Arduino programmers to designate a particular port pin. It has the advantage of being consistent over a wide range of boards in the Arduino family.</p>
<p>Add the two push button switches to the plug-in breadboard, using pin-to-pin leads ans shown in <a href="#fig-ex2-3" class="quarto-xref">Figure&nbsp;<span>22.3</span></a>. Take great care when mounting the switches on the breadboard, to orient them correctly, and to avoid bending the little tabs!</p>
<p>When the program runs, the LEDs on Port C will count up as before. When the left-hand button is pressed, the counter stops and resumes when the button is released. We are “in control” of the counter!</p>
<div id="fig-ex2-3" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Wiring diagram for prototype board.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ex2-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/exp2_wiring_diagram.png" class="img-fluid figure-img" alt="Wiring diagram for prototype board.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ex2-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;22.3: Wiring diagram for Experiment
</figcaption>
</figure>
</div>
</section>
<section id="lets-go-faster" class="level2">
<h2 class="anchored" data-anchor-id="lets-go-faster">Let’s go faster</h2>
<p>The next program, in <a href="#lst-ex2-2" class="quarto-xref">Listing&nbsp;<span>22.2</span></a>, uses both buttons. The left-hand button, as before, stops the counter. The right-hand button is a “turbo” button, and makes the counter speed up by a factor of 10!</p>
<p>A new program structure, <code>if...else</code> has been introduced <a href="#lst-ex2-2" class="quarto-xref">Listing&nbsp;<span>22.2</span></a> (lines 28—33) is used to decide on a delay of 1000 ms or a delay of 100 ms, depending on the condition of the button.</p>
<p>The general <code>if…else</code> structure is as follows:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb3-1"><a href="#cb3-1"></a><span class="cf">if</span> <span class="op">(</span>condition <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>    operation <span class="dv">1</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>   operation <span class="dv">2</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>An additional program structure, <code>else if</code>, can replace <code>else</code> if there are multiple decisions.</p>
</section>
<section id="sec-section-5" class="level2">
<h2 class="anchored" data-anchor-id="sec-section-5">An exercise for the reader…</h2>
<p>The last part of Experiment 2 is an exercise for the reader. Do not despair, all the program elements needed have been covered in this Experiment and Experiment 1.</p>
<p>Modify the program in <a href="#lst-ex2-2" class="quarto-xref">Listing&nbsp;<span>22.2</span></a> so that the buttons have this effect:</p>
<ol type="1">
<li>If no buttons are pressed, a counter on Port C and a counter on Port B increment at the same rate, with a delay of 1000 ms so that the LEDs seem to be counting identically.</li>
<li>If the left button is pressed, the LEDs on Port C stop counting but the LEDs on Port B continue as before.</li>
<li>If the right button is pressed, the LEDs on Port B stop counting but the LEDs on Port C continue as before.</li>
<li>If both buttons are pressed, both sets of LEDs stop counting but resume when the buttons are released.</li>
</ol>
<p><em>A hint</em>: there are four distinct parts inside <code>loop()</code>; first of all, update both sets of LEDs. Then test one button and make a decision to increment counter 1 or not. Then test the other button and do the same for counter 2. Finally, adjust the delay.</p>
</section>
<section id="assessment-of-experiment-2" class="level2">
<h2 class="anchored" data-anchor-id="assessment-of-experiment-2">Assessment of Experiment 2</h2>
<p>This follows the pattern set in Experiment 1.</p>
<ul>
<li>A photograph of the modified breadboard, with some form of identification.</li>
<li>A flow-chart of your final program as specified in <a href="#sec-section-5" class="quarto-xref"><span>An exercise for the reader…</span></a> above.</li>
<li>A listing of your final program with suitable comments.</li>
</ul>
</section>
<section id="code-listings-and-flow-charts" class="level2">
<h2 class="anchored" data-anchor-id="code-listings-and-flow-charts">Code Listings and Flow-Charts</h2>
<section id="binary-counter-with-stopstart-control" class="level3">
<h3 class="anchored" data-anchor-id="binary-counter-with-stopstart-control">Binary counter with stop/start control</h3>
<div id="fig-lab2-flow-chart" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Flow-chart for binary counter with stop/start control. a) Is the setup sub-process. b) is the loop subprocess." data-with="25%">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-lab2-flow-chart-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/lab2-flow-chart.png" class="img-fluid figure-img" data-with="25%" alt="Flow-chart for binary counter with stop/start control. a) Is the setup sub-process. b) is the loop subprocess.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-lab2-flow-chart-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;22.4: Flow-chart for binary counter with stop/start control.
</figcaption>
</figure>
</div>
<div id="lst-ex2-1" class="c listing quarto-float quarto-figure quarto-figure-left anchored" data-code-line-numbers="true">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-ex2-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;22.1: Binary counter with stop/start control.
</figcaption>
<div aria-describedby="lst-ex2-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-ex2-1" data-code-line-numbers="true"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="lst-ex2-1-1"><a href="#lst-ex2-1-1" aria-hidden="true" tabindex="-1"></a><span class="co">// define variables</span></span>
<span id="lst-ex2-1-2"><a href="#lst-ex2-1-2" aria-hidden="true" tabindex="-1"></a>byte counter1<span class="op">,</span> counter2<span class="op">;</span> <span class="co">// counter2 is not used in this program</span></span>
<span id="lst-ex2-1-3"><a href="#lst-ex2-1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-ex2-1-4"><a href="#lst-ex2-1-4" aria-hidden="true" tabindex="-1"></a><span class="co">// the setup function runs once when you press reset or power the board</span></span>
<span id="lst-ex2-1-5"><a href="#lst-ex2-1-5" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> setup<span class="op">()</span> <span class="op">{</span></span>
<span id="lst-ex2-1-6"><a href="#lst-ex2-1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-ex2-1-7"><a href="#lst-ex2-1-7" aria-hidden="true" tabindex="-1"></a>    counter1 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>  <span class="co">// Initialize counter 1</span></span>
<span id="lst-ex2-1-8"><a href="#lst-ex2-1-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="lst-ex2-1-9"><a href="#lst-ex2-1-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">// initialize Ports B and C pins 0-5 as outputs.</span></span>
<span id="lst-ex2-1-10"><a href="#lst-ex2-1-10" aria-hidden="true" tabindex="-1"></a>    DDRB <span class="op">=</span> <span class="bn">0b00111111</span><span class="op">;</span> DDRC <span class="op">=</span> <span class="bn">0b00111111</span><span class="op">;</span></span>
<span id="lst-ex2-1-11"><a href="#lst-ex2-1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-ex2-1-12"><a href="#lst-ex2-1-12" aria-hidden="true" tabindex="-1"></a>    PORTB <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> PORTC <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="co">// both ports start from zero</span></span>
<span id="lst-ex2-1-13"><a href="#lst-ex2-1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-ex2-1-14"><a href="#lst-ex2-1-14" aria-hidden="true" tabindex="-1"></a>    pinMode<span class="op">(</span><span class="dv">2</span><span class="op">,</span> INPUT_PULLUP<span class="op">);</span> <span class="co">// Make bit 2 of Port D an input</span></span>
<span id="lst-ex2-1-15"><a href="#lst-ex2-1-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="lst-ex2-1-16"><a href="#lst-ex2-1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-ex2-1-17"><a href="#lst-ex2-1-17" aria-hidden="true" tabindex="-1"></a><span class="co">// the loop function runs repeatedly forever</span></span>
<span id="lst-ex2-1-18"><a href="#lst-ex2-1-18" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> loop<span class="op">()</span> <span class="op">{</span></span>
<span id="lst-ex2-1-19"><a href="#lst-ex2-1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-ex2-1-20"><a href="#lst-ex2-1-20" aria-hidden="true" tabindex="-1"></a>    PORTC <span class="op">=</span> counter1<span class="op">;</span></span>
<span id="lst-ex2-1-21"><a href="#lst-ex2-1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-ex2-1-22"><a href="#lst-ex2-1-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">// if (digitalRead(2) != 0){counter1++;}</span></span>
<span id="lst-ex2-1-23"><a href="#lst-ex2-1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-ex2-1-24"><a href="#lst-ex2-1-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">((</span>PIND <span class="op">&amp;</span> <span class="bn">0b00000100</span><span class="op">)</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="lst-ex2-1-25"><a href="#lst-ex2-1-25" aria-hidden="true" tabindex="-1"></a>        counter1<span class="op">++;</span></span>
<span id="lst-ex2-1-26"><a href="#lst-ex2-1-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="lst-ex2-1-27"><a href="#lst-ex2-1-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-ex2-1-28"><a href="#lst-ex2-1-28" aria-hidden="true" tabindex="-1"></a>    <span class="co">// either of the two lines above can be used</span></span>
<span id="lst-ex2-1-29"><a href="#lst-ex2-1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-ex2-1-30"><a href="#lst-ex2-1-30" aria-hidden="true" tabindex="-1"></a>    delay<span class="op">(</span><span class="dv">1000</span><span class="op">);</span> <span class="co">// reduce this delay for faster counting</span></span>
<span id="lst-ex2-1-31"><a href="#lst-ex2-1-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</figure>
</div>
<p>View and download code as a GitHub gist: <a href="https://gist.github.com/cpjobling/c3ad4ae874ad7b77605aa7929468d04f">digi_input1.ino</a>.</p>
</section>
<section id="wokwi-simulation-of-binary-counter-with-stopstart-control" class="level3">
<h3 class="anchored" data-anchor-id="wokwi-simulation-of-binary-counter-with-stopstart-control">Wokwi simulation of binary counter with stop/start control</h3>
<p>You can run a <a href="https://wokwi.com"><strong>wokwi</strong></a> simulation of this circuit which was created by EEE project student Yousef Alsayegh (class of 2024-2025). The link is <a href="https://wokwi.com/projects/413613900477042689">Lab 2: Binary counter with stop/start control</a> and it uses the code from <a href="#lst-ex2-1" class="quarto-xref">Listing&nbsp;<span>22.1</span></a>. You can copy and edit this to create your own simulation the binary counter with stop/start and turbo button using the code from <a href="#lst-ex2-2" class="quarto-xref">Listing&nbsp;<span>22.2</span></a>.</p>
<p>If you do, it would be useful to provide links to the simulations in your lab diary.</p>
</section>
<section id="binary-counter-with-stopstart-and-turbo-button" class="level3">
<h3 class="anchored" data-anchor-id="binary-counter-with-stopstart-and-turbo-button">Binary counter with stop/start and turbo button</h3>
<div id="lst-ex2-2" class="c listing quarto-float quarto-figure quarto-figure-left anchored">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-ex2-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;22.2: Binary counter with stop/start and turbo button.
</figcaption>
<div aria-describedby="lst-ex2-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-ex2-2"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="lst-ex2-2-1"><a href="#lst-ex2-2-1" aria-hidden="true" tabindex="-1"></a><span class="co">// define variables</span></span>
<span id="lst-ex2-2-2"><a href="#lst-ex2-2-2" aria-hidden="true" tabindex="-1"></a>byte counter1<span class="op">,</span>counter2<span class="op">;</span> <span class="co">// counter2 is not used in this programme</span></span>
<span id="lst-ex2-2-3"><a href="#lst-ex2-2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-ex2-2-4"><a href="#lst-ex2-2-4" aria-hidden="true" tabindex="-1"></a><span class="co">// the setup function runs once when you press reset or power the board</span></span>
<span id="lst-ex2-2-5"><a href="#lst-ex2-2-5" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> setup<span class="op">()</span> <span class="op">{</span></span>
<span id="lst-ex2-2-6"><a href="#lst-ex2-2-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">// initialize counter</span></span>
<span id="lst-ex2-2-7"><a href="#lst-ex2-2-7" aria-hidden="true" tabindex="-1"></a>    counter1 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="lst-ex2-2-8"><a href="#lst-ex2-2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-ex2-2-9"><a href="#lst-ex2-2-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">// initialize Ports B and C pins 0-5 as outputs.</span></span>
<span id="lst-ex2-2-10"><a href="#lst-ex2-2-10" aria-hidden="true" tabindex="-1"></a>    DDRB <span class="op">=</span> <span class="bn">0b00111111</span><span class="op">;</span> DDRC <span class="op">=</span> <span class="bn">0b00111111</span><span class="op">;</span></span>
<span id="lst-ex2-2-11"><a href="#lst-ex2-2-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="lst-ex2-2-12"><a href="#lst-ex2-2-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">// both ports start from zero</span></span>
<span id="lst-ex2-2-13"><a href="#lst-ex2-2-13" aria-hidden="true" tabindex="-1"></a>    PORTB <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> PORTC <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="lst-ex2-2-14"><a href="#lst-ex2-2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-ex2-2-15"><a href="#lst-ex2-2-15" aria-hidden="true" tabindex="-1"></a>    pinMode<span class="op">(</span><span class="dv">2</span><span class="op">,</span> INPUT_PULLUP<span class="op">);</span> <span class="co">// Make bit 2 of Port D an input</span></span>
<span id="lst-ex2-2-16"><a href="#lst-ex2-2-16" aria-hidden="true" tabindex="-1"></a>    pinMode<span class="op">(</span><span class="dv">3</span><span class="op">,</span> INPUT_PULLUP<span class="op">);</span> <span class="co">// Make bit 3 of Port D an input</span></span>
<span id="lst-ex2-2-17"><a href="#lst-ex2-2-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="lst-ex2-2-18"><a href="#lst-ex2-2-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-ex2-2-19"><a href="#lst-ex2-2-19" aria-hidden="true" tabindex="-1"></a><span class="co">// the loop function runs repeatedly forever</span></span>
<span id="lst-ex2-2-20"><a href="#lst-ex2-2-20" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> loop<span class="op">()</span> <span class="op">{</span></span>
<span id="lst-ex2-2-21"><a href="#lst-ex2-2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-ex2-2-22"><a href="#lst-ex2-2-22" aria-hidden="true" tabindex="-1"></a>    PORTC <span class="op">=</span> counter1<span class="op">;</span></span>
<span id="lst-ex2-2-23"><a href="#lst-ex2-2-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-ex2-2-24"><a href="#lst-ex2-2-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>digitalRead<span class="op">(</span><span class="dv">2</span><span class="op">)</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="lst-ex2-2-25"><a href="#lst-ex2-2-25" aria-hidden="true" tabindex="-1"></a>        counter1<span class="op">++;</span></span>
<span id="lst-ex2-2-26"><a href="#lst-ex2-2-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="co">// same decision as previous</span></span>
<span id="lst-ex2-2-27"><a href="#lst-ex2-2-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-ex2-2-28"><a href="#lst-ex2-2-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>digitalRead<span class="op">(</span><span class="dv">3</span><span class="op">)</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="lst-ex2-2-29"><a href="#lst-ex2-2-29" aria-hidden="true" tabindex="-1"></a>        delay<span class="op">(</span><span class="dv">1000</span><span class="op">);</span></span>
<span id="lst-ex2-2-30"><a href="#lst-ex2-2-30" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="co">// long delay is default</span></span>
<span id="lst-ex2-2-31"><a href="#lst-ex2-2-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="op">{</span></span>
<span id="lst-ex2-2-32"><a href="#lst-ex2-2-32" aria-hidden="true" tabindex="-1"></a>        delay<span class="op">(</span><span class="dv">100</span><span class="op">);</span></span>
<span id="lst-ex2-2-33"><a href="#lst-ex2-2-33" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="co">// short delay if button is pressed</span></span>
<span id="lst-ex2-2-34"><a href="#lst-ex2-2-34" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</figure>
</div>
<p>View and download code as a GitHub gist: <a href="https://gist.github.com/cpjobling/2aea9097a906424b0b2ba1eab2bcf3b2">digi_input2.ino</a>.</p>
</section>
</section>
<section id="photograph-of-experiment-2" class="level2">
<h2 class="anchored" data-anchor-id="photograph-of-experiment-2">Photograph of Experiment 2</h2>
<p>The following photograph (<a href="#fig-photo-ex2-1" class="quarto-xref">Figure&nbsp;<span>22.5</span></a>) has been provided by Dr Davies who created this experiment.</p>
<div id="fig-photo-ex2-1" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Photograph of the prototype board after completing experiment 2.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-photo-ex2-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/Expt3A1-1.jpg" class="img-fluid figure-img" alt="Photograph of the prototype board after completing experiment 2.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-photo-ex2-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;22.5: Photograph of the completed prototype board for Experiment 2.
</figcaption>
</figure>
</div>


</section>

<p>Copyright © 2021-2024 Swansea University. All rights reserved.</p></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/cpjobling\.github\.io\/eg-151-textbook");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../labs/lab01/index.html" class="pagination-link" aria-label="Experiment 1: Binary Counter">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Experiment 1: Binary Counter</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../labs/lab03/index.html" class="pagination-link" aria-label="Experiment 3: Analogue to Digital Conversion">
        <span class="nav-page-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Experiment 3: Analogue to Digital Conversion</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/cpjobling/eg-151-textbook/edit/main/website/labs/lab02/index.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/cpjobling/eg-151-textbook/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>