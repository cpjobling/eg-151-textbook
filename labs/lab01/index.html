<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr Timothy Davies">
<meta name="author" content="Dr Chris P. Jobling">
<meta name="dcterms.date" content="2024-10-21">

<title>Experiment 1: Binary Counter – EG-151 Microcontrollers 2024-2025</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../labs/lab02/index.html" rel="next">
<link href="../../labs/get_started/index.html" rel="prev">
<link href="../../logo.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="application/json" class="js-hypothesis-config">
{
  "theme": "clean",
  "openSidebar": false
}
</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../labs/index.html">Microcontroller Programming Laboratory</a></li><li class="breadcrumb-item"><a href="../../labs/lab01/index.html"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Experiment 1: Binary Counter</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">EG-151 Microcontrollers 2024-2025</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/cpjobling/eg-151-textbook/tree/main/website/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">EG-151 Microcontrollers</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Course Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../intro/course_aims.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Aims</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../intro/course_delivery.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Delivery Method</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../lectures/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Microcontrollers Lectures</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">EG-151 Microcontrollers—Module Staff</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week01/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction to Microcontrollers and Microcontroller Architecture</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/data_representation/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introduction to Data Representation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week02/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Architecture of the Atmel ATmega 328 Microcontroller</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week03/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Introduction to Programming and Program Development</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week04/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Introduction to Programming with C</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week05/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Interfacing to digital I/O with C</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week06/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Interfacing to Analogue I/O with C</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week07/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Introduction to Assembly Language</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week08/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Microcontroller Architecture – Program Operation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week09/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Addressing Modes</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../lab_intro/intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Laboratory Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/assessment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Assessment of the Laboratory Introduction</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/lab_work.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Laboratory Work in the Department of Electronic and Electrical Engineering</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/lab_instruments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Laboratory Instruments</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/lab_safety.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Laboratory Safety</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/experiment0.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Experiment: to construct an oscillator</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/simulation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Simulation Exercise</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/questions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Questions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/construction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Construction Exercise - Continuity Tester</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/soldering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Safe Soldering</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../labs/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Microcontroller Programming Laboratory</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/get_started/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Getting Started</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/lab01/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Experiment 1: Binary Counter</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/lab02/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Experiment 2: Digital Input</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/lab03/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Experiment 3: Analogue to Digital Conversion</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/lab04/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Experiment 4: Arrays</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/lab05/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Experiment 5: LCD Display Panel</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../projects/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mini Projects</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../projects/voltmeter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Voltmeter</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../projects/range_finder.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Ultrasonic Range Finder</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../projects/clock_timer.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Clock Time</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../projects/weather_station.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Weather Station</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../appendix/appendix_a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Other Data Representations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../appendix/programming_in_c.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Programming in C – from nothing to software</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#how-can-the-microcontroller-make-something-happen" id="toc-how-can-the-microcontroller-make-something-happen" class="nav-link active" data-scroll-target="#how-can-the-microcontroller-make-something-happen">How can the microcontroller make something happen?</a></li>
  <li><a href="#parallel-ports-and-data-direction-registers" id="toc-parallel-ports-and-data-direction-registers" class="nav-link" data-scroll-target="#parallel-ports-and-data-direction-registers">Parallel ports and data direction registers</a></li>
  <li><a href="#method" id="toc-method" class="nav-link" data-scroll-target="#method">Method</a></li>
  <li><a href="#our-first-programme" id="toc-our-first-programme" class="nav-link" data-scroll-target="#our-first-programme">Our First Programme</a></li>
  <li><a href="#lets-make-a-decision" id="toc-lets-make-a-decision" class="nav-link" data-scroll-target="#lets-make-a-decision">Lets make a decision</a></li>
  <li><a href="#lets-do-it-again" id="toc-lets-do-it-again" class="nav-link" data-scroll-target="#lets-do-it-again">Lets do it again!</a></li>
  <li><a href="#lets-do-it-differently" id="toc-lets-do-it-differently" class="nav-link" data-scroll-target="#lets-do-it-differently">Let’s do it differently</a></li>
  <li><a href="#assessment-of-experiment-1" id="toc-assessment-of-experiment-1" class="nav-link" data-scroll-target="#assessment-of-experiment-1">Assessment of Experiment 1</a></li>
  <li><a href="#code-listings" id="toc-code-listings" class="nav-link" data-scroll-target="#code-listings">Code Listings</a>
  <ul class="collapse">
  <li><a href="#basic-counter" id="toc-basic-counter" class="nav-link" data-scroll-target="#basic-counter">Basic counter</a></li>
  <li><a href="#wokwi-simulation-of-basic-counter" id="toc-wokwi-simulation-of-basic-counter" class="nav-link" data-scroll-target="#wokwi-simulation-of-basic-counter">Wokwi simulation of basic counter</a></li>
  <li><a href="#cascaded-counter" id="toc-cascaded-counter" class="nav-link" data-scroll-target="#cascaded-counter">Cascaded counter</a></li>
  <li><a href="#counter-using-for-loop" id="toc-counter-using-for-loop" class="nav-link" data-scroll-target="#counter-using-for-loop">Counter using for loop</a></li>
  </ul></li>
  <li><a href="#photographs-of-plug-in-breadboard" id="toc-photographs-of-plug-in-breadboard" class="nav-link" data-scroll-target="#photographs-of-plug-in-breadboard">Photographs of Plug-in Breadboard</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/cpjobling/eg-151-textbook/edit/main/website/labs/lab01/index.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/cpjobling/eg-151-textbook/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../labs/index.html">Microcontroller Programming Laboratory</a></li><li class="breadcrumb-item"><a href="../../labs/lab01/index.html"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Experiment 1: Binary Counter</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-lab-1" class="quarto-section-identifier"><span class="chapter-title">Experiment 1: Binary Counter</span></span></h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Authors</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Dr Timothy Davies </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Department of Electronic and Electrical Engineering
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Dr Chris P. Jobling </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Department of Electronic and Electrical Engineering
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 21, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="how-can-the-microcontroller-make-something-happen" class="level2">
<h2 class="anchored" data-anchor-id="how-can-the-microcontroller-make-something-happen">How can the microcontroller make something happen?</h2>
The microcontroller on the Nano board has a number of <em>parallel ports</em>, which can be used to make something happen in the world outside the plastic package. Parallel ports are usually groups of eight pins, however on the Arduino Nano not all the pins are brought out to the edge of the board. So, working within this constraint, Experiment 1 will begin with the construction and programming of a six-bit binary counter, which can count from zero to <span class="math inline">\(63\)</span> (<span class="math inline">\(2^6 - 1\)</span>).
<p></p>
</section>
<section id="parallel-ports-and-data-direction-registers" class="level2">
<h2 class="anchored" data-anchor-id="parallel-ports-and-data-direction-registers">Parallel ports and data direction registers</h2>
<p>In most microcontrollers, including the Atmel ATMega32 used in the Arduini Nano board, we set the digital port to be either an input or an output by setting a value in a special register, associated with the parallel port, which is called the <em>Data Direction Register</em> (DDR).</p>
<p>The DDR settings that provide the six outputs that we need for this experiment are shown in <a href="#tbl-1-ddr" class="quarto-xref">Table&nbsp;<span>21.1</span></a>.</p>
<div id="tbl-1-ddr" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-1-ddr-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;21.1: DDR for setting six outputs
</figcaption>
<div aria-describedby="tbl-1-ddr-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th>DDRC7</th>
<th>DDRC6</th>
<th>DDRC5</th>
<th>DDRC4</th>
<th>DDRC3</th>
<th>DDRC2</th>
<th>DDRC1</th>
<th>DDRC0</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1 0</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>There are two ways of setting the bits in the DDR. Individual bits can be set using an Arduino specific command, <code>pinMode</code>. For this experiment, we shall write directly to the DDR corresponding to Port C, which is designated <code>DDRC</code> in our programme. In the example shown above, the top two bits of Port C will be inputs (<code>DDRC7=0</code>, <code>DDRC6 = 0</code>) and all the remaining bits will be outputs. This is a more general way of setting a DDR in different versions of embedded “C”.</p>
<p>Writing a number to the port register itself will cause a binary pattern to appear on the corresponding pins of the designated port, according to their binary weights. For example, bit 0 has a binary weight of <span class="math inline">\(2^0 = 1\)</span>, bit 1 has a binary weight of <span class="math inline">\(2^1 = 2\)</span>, bit 2 has a binary weight of <span class="math inline">\(2^2 = 4\)</span>, all the way up to bit 7 which has a binary weight of <span class="math inline">\(2^7 = 128\)</span>.</p>
</section>
<section id="method" class="level2">
<h2 class="anchored" data-anchor-id="method">Method</h2>
<p>Construct the circuit shown in <a href="#fig-ex1-1" class="quarto-xref">Figure&nbsp;<span>21.1</span></a> using the components supplied in your laboratory kit:</p>
<div class="{fig-ex1-1}">
<p><img src="pictures/fig1.png" class="img-fluid" alt="Wiring diagram for experiment 1."></p>
<p>Counter circuit.</p>
</div>
</section>
<section id="our-first-programme" class="level2">
<h2 class="anchored" data-anchor-id="our-first-programme">Our First Programme</h2>
<p>Now you are familiar with the Arduino IDE from running “Blink” in section <a href="../get_started/#sec-on-the-blink">on the blink</a>, the next step is to write a new programme.</p>
<p><a href="#lst-listing1" class="quarto-xref">Listing&nbsp;<span>21.1</span></a> shows the text of a program which will illuminate the LEDs in a binary sequence, starting from zero (all LEDs off) to 63 (all LEDs on). Then the LEDs will go back to zero. The time it takes to count is controlled by a “time wasting” delay, using the Arduino specific command <code>delay()</code>.</p>
<p>First connect your Arduino Nano board to your PC with the cable provided. Next open Arduino IDE 2 and select the connection and board as described in section <a href="../get_started/#sec-set-up-arduino">initial set up</a>. From the file menu select “New Sketch”. Click on the small clipboard icon at the top-right corner of the code listing <a href="#lst-listing1" class="quarto-xref">Listing&nbsp;<span>21.1</span></a> (<img src="pictures/clipboard.png" class="img-fluid">) to copy the code and paste it into the code window of the new sketch. Save the sketch file as <code>counter1</code>.</p>
<p>THE Arduio IDE will close then reopen with the code for a new Sketch project called <code>counter1.ino</code> loaded in the code editor as shown in <a href="#fig-ex1-1" class="quarto-xref">Figure&nbsp;<span>21.1</span></a>.</p>
<div id="fig-ex1-1" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Screenshot of Arduino IDE 2 with the code for counter1 loaded and saved.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ex1-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/fig2.png" class="img-fluid figure-img" alt="Screenshot of Arduino IDE 2 with the code for counter1 loaded and saved.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ex1-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.1: Our first program ready for testing.
</figcaption>
</figure>
</div>
<p>Now that the file has been entered into the computer and an Arduino sketch project it must be converted into a form the Arduino board can accept. This operation is called compilation.</p>
<p>Click on the icon which starts the compilation. This is the blue tick near the top of the window, also called Verify. After a few seconds, the display area at the bottom of the window should say “compilation complete”. If it does not, and some error message appears, check carefully that the program has been entered correctly and try again.</p>
<p>When the program has been compiled successfully, it must be uploaded to the Arduino. Click on the blue arrow near the top of the window, called Upload. This operation should only take a few seconds. The message “Done uploading” tells us that the upload operation has been successful, and the LEDs should start counting.</p>
<p>If the upload fails, there are a number of things to check. Under “tools”, there are a number of settings, e.g.</p>
<ul>
<li>Board type: <code>Arduino Nano</code></li>
<li>Processor: <code>ATmega328P</code></li>
<li>Port: <code>/dev/ttyUSB0</code> (for example only; this will differ for PC and Mac)</li>
</ul>
<p>If the above are wrong, then the upload will fail. Ask a demonstrator for help!</p>
</section>
<section id="lets-make-a-decision" class="level2">
<h2 class="anchored" data-anchor-id="lets-make-a-decision">Lets make a decision</h2>
<p>The flow-charts for <a href="#lst-listing1" class="quarto-xref">Listing&nbsp;<span>21.1</span></a> is given in <a href="#fig-lab1-ex1-setup" class="quarto-xref">Figure&nbsp;<span>21.2</span></a> and <a href="#fig-lab1-ex1-loop" class="quarto-xref">Figure&nbsp;<span>21.3</span></a>. Note that the codes are similar to the flow-charts given in <a href="../get_started/index">Getting Started</a>. There are just a couple of steps in the setup sub-process and one less output task in the loop. Note also that we have used english statements rather than code in the block labels.</p>
<div id="fig-lab1-ex1-setup" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Flow-chart of the setup sub-process for the first program">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-lab1-ex1-setup-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/lab1-ex1-setup.png" class="img-fluid figure-img" style="width:25.0%" alt="Flow-chart of the setup sub-process for the first program">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-lab1-ex1-setup-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.2: Flow-chart of the setup sub-process for the first program
</figcaption>
</figure>
</div>
<div id="fig-lab1-ex1-loop" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Flow-chart of the loop sub-process for the first program.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-lab1-ex1-loop-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/lab1-ex1-loop.png" class="img-fluid figure-img" style="width:25.0%" alt="Flow-chart of the loop sub-process for the first program.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-lab1-ex1-loop-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.3: Flow-chart of the loop sub-process for the first program
</figcaption>
</figure>
</div>
<p>The example program counts from zero to 255 and then back to zero, though we see the LEDs being illuminated from zero to 63 as there are only six LEDs. The counts from 64 to 127 look just the same as zero to 63! As the counter is only 8 bits, when we get to 255, the counter is reset to 0. This behaviour is not obvious from the flow-chart for the loop subprocess.</p>
<p>Supposing we need a counter that counts from zero to 59, and then back to zero. This is often required, for example in time-keeping programmes (60 seconds in a minute, 60 seconds in an hour). The number of count values (60 in this case) is called a Modulus.</p>
<p>There are several ways we can add a modulus to our counter programme. Here we will use a decision.</p>
<p>If we add a decision block to the flow chart for the loop, as shown in <a href="#fig-lab1-ex2-loop" class="quarto-xref">Figure&nbsp;<span>21.4</span></a>, we can control the maximum count that can occur.</p>
<div id="fig-lab1-ex2-loop" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Flow-chart of the loop sub-process with a decision block used to limit the maximum value of the counter to 59.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-lab1-ex2-loop-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/lab1-ex2-loop.png" class="img-fluid figure-img" style="width:25.0%" alt="Flow-chart of the loop sub-process with a decision block used to limit the maximum value of the counter to 59.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-lab1-ex2-loop-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.4: Flow-chart of the loop sub-process with a decision block used to limit the maximum value of the counter to 59
</figcaption>
</figure>
</div>
<p>The code that corresponds to the decision block in <a href="#fig-lab1-ex2-loop" class="quarto-xref">Figure&nbsp;<span>21.4</span></a> is</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1"></a>counter <span class="op">=</span> counter <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="cf">if</span> <span class="op">(</span>counter <span class="op">&gt;</span> <span class="dv">59</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-3"><a href="#cb1-3"></a>  counter <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this code, we have made a decision! If the value of the variable <code>counter</code> is increased beyond 59, then it will be set back to zero, so the LEDs never advance beyond 59.</p>
<p>Why bother with counts greater than 60? Well, if the program is not properly initialised then there will be a number of false counts.</p>
<p>If you are not familiar with “C” programming, then you will notice that there are two kinds of “equals” in the extra line. The “greater than” (<code>&gt;</code>) is a comparison and does not change any values. In other words the value of the variable <code>counter</code> is compared with the fixed value of 59. If the condition is true, then the contents of the “braces” (squiggly brackets) are executed. The single equals (<code>=</code>) is an <em>assignment</em> and forces the value of the variable to the fixed value zero.</p>
<p>Just to make life more interesting, in “C” there is a “double equals” <code>==</code>). This can be a source of confusion when starting to program in the “C” language. It is used to compare two numbers, for example as follows:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb2-1"><a href="#cb2-1"></a>counter <span class="op">=</span> counter <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="cf">if</span> <span class="op">(</span>counter <span class="op">==</span> <span class="dv">60</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>  counter <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>
</p><p>There are lots of “C” commands which reduce the amount of text that you have to write. For example, instead of adding 1 to the variable <code>counter1</code> we can use the <em>increment operator</em> (<code>++</code>) to increment a variable by 1:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb3-1"><a href="#cb3-1"></a>counter<span class="op">++;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This has the same effect as adding “1” to the variable <code>counter</code> and reassigning the new value to <code>counter</code> which is what:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb4-1"><a href="#cb4-1"></a>counter <span class="op">=</span> counter <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>does.</p>
</section>
<section id="lets-do-it-again" class="level2">
<h2 class="anchored" data-anchor-id="lets-do-it-again">Lets do it again!</h2>
<p>Now that we are masters of the modulus counter, lets repeat the operation by connecting another set of LEDs to port B, and adding extra lines to the program as shown in <a href="#lst-listing2" class="quarto-xref">Listing&nbsp;<span>21.2</span></a>.</p>
<p>This will require another variable, for example “counter2”.</p>
<p>In addition, let us increment <code>counter1</code> when <code>counter2</code> <em>overflows</em>, (changes from 59 to zero) so that one set of LEDs is counting in seconds and the other set of LEDs is counting in minutes.</p>
<p>Add another set of six LEDs and resistors to the Breadboard as shown in <a href="#fig-ex1-3" class="quarto-xref">Figure&nbsp;<span>21.5</span></a>.</p>
<div id="fig-ex1-3" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Wiring diagram for cascaded counter.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ex1-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/fig3.png" class="img-fluid figure-img" alt="Wiring diagram for cascaded counter.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ex1-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.5: Circuit board for a cascaded counter.
</figcaption>
</figure>
</div>
<p>Modify the program to include the extra lines and compile then upload. If this is successful, then the LEDs on port B will count as far as 59 (<code>0b0111011</code>) and then all go out and start counting again. At the instant the LEDs on port B go out, the LEDs on port C will advance by one. So, if we have the patience, after an hour the LEDs will reach their maximum value of 59 minutes, 59 seconds (<code>0b0111011</code> <code>0b0111011</code>) and all go out. Then the counter starts counting again from all zeros.</p>
</section>
<section id="lets-do-it-differently" class="level2">
<h2 class="anchored" data-anchor-id="lets-do-it-differently">Let’s do it differently</h2>
<p>So far we have used simple arithmetic operations such as addition to increment the variables, then compare with a fixed modulus. An alternative is to use a <code>for(;;)</code> loop.</p>
<p>Let’s look at the elements of a <code>for(;;)</code> loop:</p>
<pre><code>for (variable = initial value; condition to be met; operation on variable) {
   code to be executed in for loop;
}</code></pre>
<p>A better way of understanding the <code>for(;;)</code> loop is to look at a practical example;</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb6-1"><a href="#cb6-1"></a><span class="cf">for</span> <span class="op">(</span>counter2 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> counter2 <span class="op">&lt;</span> <span class="dv">60</span><span class="op">;</span> counter2<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>  PORTB <span class="op">=</span> counter2<span class="op">;</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>  delay<span class="op">(</span><span class="dv">1000</span><span class="op">);</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In just three lines of code, the start and end values of the loop are set up, and the increment defined, followed by the code to be executed each time around the loop. This illustrates the compact nature of the “C” language.</p>
<p>This <code>for(;;)</code> loop only executes once, so we still need to make it repeat, which is made possible by the <code>loop</code> function in the Arduino program. Suppose we embed this <code>for(;;)</code> loop in an outer <code>for(;;)</code> loop, which increments a different variable and writes to a different port? Then we will have achieved the same result as the program in <a href="#lst-listing2" class="quarto-xref">Listing&nbsp;<span>21.2</span></a>, but in a more elegant fashion:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb7-1"><a href="#cb7-1"></a><span class="cf">for</span> <span class="op">(</span>counter1 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> counter1 <span class="op">&lt;</span> <span class="dv">60</span><span class="op">;</span> counter1<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>    PORTC <span class="op">=</span> counter1<span class="op">;</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>    <span class="cf">for</span> <span class="op">(</span>counter2 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> counter2 <span class="op">&lt;</span> <span class="dv">60</span><span class="op">;</span> counter2<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>        PORTB <span class="op">=</span> counter2<span class="op">;</span> </span>
<span id="cb7-5"><a href="#cb7-5"></a>        delay<span class="op">(</span><span class="dv">1000</span><span class="op">)</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>    <span class="op">}</span></span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The “heart” of the program is just a few lines of code!</p>
<p>Modify the program as shown in <a href="#lst-listing3" class="quarto-xref">Listing&nbsp;<span>21.3</span></a>, compile and upload, and check that it really does what we expect. You may find it convenient to reduce the delay from 1000 to speed up the operation of the counters.</p>
</section>
<section id="assessment-of-experiment-1" class="level2">
<h2 class="anchored" data-anchor-id="assessment-of-experiment-1">Assessment of Experiment 1</h2>
<p>Open the document you are using as a laboratory diary and add a new section “Experiment 1”.</p>
<p>Create a flow-chart of the cascaded counter from the code given in <a href="#lst-listing2" class="quarto-xref">Listing&nbsp;<span>21.2</span></a>.</p>
<p>Take a photograph of the completed breadboard, with the twelve LEDs and resistors fitted. Include in your photo some means of identification, such as your student card.</p>
<p>When you have finished modifying the program to correspond with <a href="#lst-listing3" class="quarto-xref">Listing&nbsp;<span>21.3</span></a>, add some comments (preceded by the double oblique stroke “//”) and copy the text from the Arduino IDE and paste it into your laboratory diary as a code listing.</p>
<p>Redraw the flow chart to reflect the order of operation of the for loops. <em>Hint</em>: A flow chart for a nested <em>for-loop</em> like the one used in <a href="#lst-listing3" class="quarto-xref">Listing&nbsp;<span>21.3</span></a> is given in <a href="../../lectures/week04/index.html#fig-wk4-nested-for-statement" class="quarto-xref">Figure&nbsp;<span>5.10</span></a>. Comment on any differences in flow-charts between that for <a href="#lst-listing2" class="quarto-xref">Listing&nbsp;<span>21.2</span></a> and that for <a href="#lst-listing3" class="quarto-xref">Listing&nbsp;<span>21.3</span></a>.</p>
<p>We shall be expecting the flow-charts and code comments to demonstrate your understanding of the way the nested <code>for(;;)</code> loop works.</p>
<p>Why are comments so important? If someone else reads the program, the comments aid understanding. Also, if you return to working on a program after a couple of weeks, it is much easier to pick up where you left off.</p>
<p>A program without comments is incomplete!</p>
<p>Don’t forget to add to your lab diary entry some discussion of the results and a reflection on the outcomes of this first experimeent.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Lab 1 <strong>cannot</strong> be signed off unless the lab diary contains the two flow-charts for <a href="#lst-listing2" class="quarto-xref">Listing&nbsp;<span>21.2</span></a> and <a href="#lst-listing2" class="quarto-xref">Listing&nbsp;<span>21.2</span></a>, the code listing for <a href="#lst-listing3" class="quarto-xref">Listing&nbsp;<span>21.3</span></a> with added comments, and a photograph of the completed modular-60 counter.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Discussion, conclusions and reflection are not needed for the experiment sign-off but <em>are</em> required for the final lab-diary submission.</p>
</div>
</div>
</section>
<section id="code-listings" class="level2">
<h2 class="anchored" data-anchor-id="code-listings">Code Listings</h2>
<section id="basic-counter" class="level3">
<h3 class="anchored" data-anchor-id="basic-counter">Basic counter</h3>
<div id="lst-listing1" class="c listing quarto-float quarto-figure quarto-figure-left anchored">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-listing1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;21.1: Basic counter.
</figcaption>
<div aria-describedby="lst-listing1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-listing1"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="lst-listing1-1"><a href="#lst-listing1-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Declare variable to be used as a counter.</span></span>
<span id="lst-listing1-2"><a href="#lst-listing1-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// This has to be done outside `setup` and `loop` so that `counter` is visible</span></span>
<span id="lst-listing1-3"><a href="#lst-listing1-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">// inside both functions</span></span>
<span id="lst-listing1-4"><a href="#lst-listing1-4" aria-hidden="true" tabindex="-1"></a>byte counter<span class="op">;</span></span>
<span id="lst-listing1-5"><a href="#lst-listing1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-listing1-6"><a href="#lst-listing1-6" aria-hidden="true" tabindex="-1"></a><span class="co">// The setup function runs once when you press reset or power the board</span></span>
<span id="lst-listing1-7"><a href="#lst-listing1-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> setup<span class="op">()</span> <span class="op">{</span></span>
<span id="lst-listing1-8"><a href="#lst-listing1-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">// initialize counter</span></span>
<span id="lst-listing1-9"><a href="#lst-listing1-9" aria-hidden="true" tabindex="-1"></a>    counter <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> </span>
<span id="lst-listing1-10"><a href="#lst-listing1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-listing1-11"><a href="#lst-listing1-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Set pins 0-5 of Port C as outputs.</span></span>
<span id="lst-listing1-12"><a href="#lst-listing1-12" aria-hidden="true" tabindex="-1"></a>    DDRC <span class="op">=</span> <span class="bn">0b00111111</span><span class="op">;</span> <span class="co">// the prefix &amp;ldquo;0b&amp;rdquo; qualifies the number as binary</span></span>
<span id="lst-listing1-13"><a href="#lst-listing1-13" aria-hidden="true" tabindex="-1"></a>    PORTC <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="co">// so all the LEDs are off initially</span></span>
<span id="lst-listing1-14"><a href="#lst-listing1-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="lst-listing1-15"><a href="#lst-listing1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-listing1-16"><a href="#lst-listing1-16" aria-hidden="true" tabindex="-1"></a><span class="co">// The loop function runs repeatedly forever</span></span>
<span id="lst-listing1-17"><a href="#lst-listing1-17" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> loop<span class="op">()</span> <span class="op">{</span></span>
<span id="lst-listing1-18"><a href="#lst-listing1-18" aria-hidden="true" tabindex="-1"></a>    PORTC <span class="op">=</span> counter<span class="op">;</span></span>
<span id="lst-listing1-19"><a href="#lst-listing1-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="lst-listing1-20"><a href="#lst-listing1-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">// increment counter</span></span>
<span id="lst-listing1-21"><a href="#lst-listing1-21" aria-hidden="true" tabindex="-1"></a>      <span class="co">// we could replace the next line with: counter1++;</span></span>
<span id="lst-listing1-22"><a href="#lst-listing1-22" aria-hidden="true" tabindex="-1"></a>      <span class="co">// or the previous line with PORTC = counter1++;</span></span>
<span id="lst-listing1-23"><a href="#lst-listing1-23" aria-hidden="true" tabindex="-1"></a>    counter <span class="op">=</span> counter <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="lst-listing1-24"><a href="#lst-listing1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-listing1-25"><a href="#lst-listing1-25" aria-hidden="true" tabindex="-1"></a>   <span class="co">// Uncomment the following three lines for a modulus of 60: </span></span>
<span id="lst-listing1-26"><a href="#lst-listing1-26" aria-hidden="true" tabindex="-1"></a>    <span class="co">// if (counter &gt; 59) {</span></span>
<span id="lst-listing1-27"><a href="#lst-listing1-27" aria-hidden="true" tabindex="-1"></a>    <span class="co">//     counter = 0;</span></span>
<span id="lst-listing1-28"><a href="#lst-listing1-28" aria-hidden="true" tabindex="-1"></a>    <span class="co">// }</span></span>
<span id="lst-listing1-29"><a href="#lst-listing1-29" aria-hidden="true" tabindex="-1"></a>    delay<span class="op">(</span><span class="dv">1000</span><span class="op">);</span> <span class="co">// reduce the delay if you get bored waiting!</span></span>
<span id="lst-listing1-30"><a href="#lst-listing1-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-listing1-31"><a href="#lst-listing1-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</figure>
</div>
<p>View and download the code from GitHub gist <a href="https://gist.github.com/cpjobling/8803a24e00f15237057dfdbb566a461b">counter.ino</a>.</p>
</section>
<section id="wokwi-simulation-of-basic-counter" class="level3">
<h3 class="anchored" data-anchor-id="wokwi-simulation-of-basic-counter">Wokwi simulation of basic counter</h3>
<p>You can run a <a href="https://wokwi.com"><strong>wokwi</strong></a> simulation of this circuit which was created by EEE project student Yousef Alsayegh (class of 2024-2025). The link is <a href="https://wokwi.com/projects/412520814281244673">Lab 1: Basic counter</a>. You can extend the circuit by adding 6 further LEDs connected as in <a href="#fig-ex1-3" class="quarto-xref">Figure&nbsp;<span>21.5</span></a> and use <a href="#lst-listing2" class="quarto-xref">Listing&nbsp;<span>21.2</span></a> to implement the cascased modulo 60 counter. You can then paste your commented version of <a href="#lst-listing3" class="quarto-xref">Listing&nbsp;<span>21.3</span></a> into the simulator’s code window to simulate final example.</p>
<p>If you succeed, it would be useful to provide links to the simulations in your lab diary.</p>
</section>
<section id="cascaded-counter" class="level3">
<h3 class="anchored" data-anchor-id="cascaded-counter">Cascaded counter</h3>
<div id="lst-listing2" class="c listing quarto-float quarto-figure quarto-figure-left anchored">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-listing2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;21.2: Cascaded counter.
</figcaption>
<div aria-describedby="lst-listing2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-listing2"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="lst-listing2-1"><a href="#lst-listing2-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Declare variables to be used as counters.</span></span>
<span id="lst-listing2-2"><a href="#lst-listing2-2" aria-hidden="true" tabindex="-1"></a>byte counter1<span class="op">,</span> counter2<span class="op">;</span></span>
<span id="lst-listing2-3"><a href="#lst-listing2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-listing2-4"><a href="#lst-listing2-4" aria-hidden="true" tabindex="-1"></a><span class="co">// the setup function runs once when you press reset or power the board</span></span>
<span id="lst-listing2-5"><a href="#lst-listing2-5" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> setup<span class="op">()</span> <span class="op">{</span></span>
<span id="lst-listing2-6"><a href="#lst-listing2-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">// define counters</span></span>
<span id="lst-listing2-7"><a href="#lst-listing2-7" aria-hidden="true" tabindex="-1"></a>    counter1 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> counter2 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="co">// initialize counters</span></span>
<span id="lst-listing2-8"><a href="#lst-listing2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-listing2-9"><a href="#lst-listing2-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">// initialize Ports B and C pins 0-5 as outputs.</span></span>
<span id="lst-listing2-10"><a href="#lst-listing2-10" aria-hidden="true" tabindex="-1"></a>    DDRB <span class="op">=</span> <span class="bn">0b00111111</span><span class="op">;</span> DDRC <span class="op">=</span> <span class="bn">0b00111111</span><span class="op">;</span></span>
<span id="lst-listing2-11"><a href="#lst-listing2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-listing2-12"><a href="#lst-listing2-12" aria-hidden="true" tabindex="-1"></a>    PORTB <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> PORTC <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="co">// both ports start from zero</span></span>
<span id="lst-listing2-13"><a href="#lst-listing2-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="lst-listing2-14"><a href="#lst-listing2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-listing2-15"><a href="#lst-listing2-15" aria-hidden="true" tabindex="-1"></a><span class="co">// the loop function runs repeatedly forever</span></span>
<span id="lst-listing2-16"><a href="#lst-listing2-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> loop<span class="op">()</span> <span class="op">{</span></span>
<span id="lst-listing2-17"><a href="#lst-listing2-17" aria-hidden="true" tabindex="-1"></a>    PORTB <span class="op">=</span> counter2<span class="op">;</span> <span class="co">// counter2 is our "seconds" counter</span></span>
<span id="lst-listing2-18"><a href="#lst-listing2-18" aria-hidden="true" tabindex="-1"></a>    PORTC <span class="op">=</span> counter1<span class="op">;</span> <span class="co">// counter1 is our "minutes" counter</span></span>
<span id="lst-listing2-19"><a href="#lst-listing2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-listing2-20"><a href="#lst-listing2-20" aria-hidden="true" tabindex="-1"></a>    counter2<span class="op">++;</span> <span class="co">// using the tip we learnt earlier</span></span>
<span id="lst-listing2-21"><a href="#lst-listing2-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>counter2 <span class="op">&gt;</span> <span class="dv">59</span><span class="op">)</span> <span class="op">{</span></span>
<span id="lst-listing2-22"><a href="#lst-listing2-22" aria-hidden="true" tabindex="-1"></a>        counter2 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="lst-listing2-23"><a href="#lst-listing2-23" aria-hidden="true" tabindex="-1"></a>        counter1<span class="op">++;</span></span>
<span id="lst-listing2-24"><a href="#lst-listing2-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>counter1 <span class="op">&gt;</span> <span class="dv">59</span><span class="op">)</span> <span class="op">{</span></span>
<span id="lst-listing2-25"><a href="#lst-listing2-25" aria-hidden="true" tabindex="-1"></a>            counter1 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="lst-listing2-26"><a href="#lst-listing2-26" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="lst-listing2-27"><a href="#lst-listing2-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="lst-listing2-28"><a href="#lst-listing2-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-listing2-29"><a href="#lst-listing2-29" aria-hidden="true" tabindex="-1"></a>    delay<span class="op">(</span><span class="dv">1000</span><span class="op">);</span> <span class="co">// again, reduce this delay if necessary to speed things up.</span></span>
<span id="lst-listing2-30"><a href="#lst-listing2-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</figure>
</div>
<p>View and download the code from GitHub gist <a href="https://gist.github.com/cpjobling/d0b1b4bfc77c28a4284b7fcff13d5d1b">counter2.ino</a>.</p>
</section>
<section id="counter-using-for-loop" class="level3">
<h3 class="anchored" data-anchor-id="counter-using-for-loop">Counter using for loop</h3>
<div id="lst-listing3" class="c listing quarto-float quarto-figure quarto-figure-left anchored">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-listing3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;21.3: Counter using for-loop.
</figcaption>
<div aria-describedby="lst-listing3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-listing3"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="lst-listing3-1"><a href="#lst-listing3-1" aria-hidden="true" tabindex="-1"></a><span class="co">// declare counters</span></span>
<span id="lst-listing3-2"><a href="#lst-listing3-2" aria-hidden="true" tabindex="-1"></a>byte counter1<span class="op">,</span> counter2<span class="op">;</span></span>
<span id="lst-listing3-3"><a href="#lst-listing3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-listing3-4"><a href="#lst-listing3-4" aria-hidden="true" tabindex="-1"></a><span class="co">// the setup function runs once when you press reset or power the board</span></span>
<span id="lst-listing3-5"><a href="#lst-listing3-5" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> setup<span class="op">()</span> <span class="op">{</span></span>
<span id="lst-listing3-6"><a href="#lst-listing3-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">// initialize counters</span></span>
<span id="lst-listing3-7"><a href="#lst-listing3-7" aria-hidden="true" tabindex="-1"></a>    counter1 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> counter2 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> </span>
<span id="lst-listing3-8"><a href="#lst-listing3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-listing3-9"><a href="#lst-listing3-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">// initialize Ports B and C pins 0-5 as outputs.</span></span>
<span id="lst-listing3-10"><a href="#lst-listing3-10" aria-hidden="true" tabindex="-1"></a>    DDRB <span class="op">=</span> <span class="bn">0b00111111</span><span class="op">;</span> DDRC <span class="op">=</span> <span class="bn">0b00111111</span><span class="op">;</span></span>
<span id="lst-listing3-11"><a href="#lst-listing3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-listing3-12"><a href="#lst-listing3-12" aria-hidden="true" tabindex="-1"></a>    PORTB <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> PORTC <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="co">// both ports start from zero</span></span>
<span id="lst-listing3-13"><a href="#lst-listing3-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="lst-listing3-14"><a href="#lst-listing3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-listing3-15"><a href="#lst-listing3-15" aria-hidden="true" tabindex="-1"></a><span class="co">// the loop function runs repeatedly forever</span></span>
<span id="lst-listing3-16"><a href="#lst-listing3-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-listing3-17"><a href="#lst-listing3-17" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> loop<span class="op">()</span> <span class="op">{</span></span>
<span id="lst-listing3-18"><a href="#lst-listing3-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-listing3-19"><a href="#lst-listing3-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>counter1 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> counter1 <span class="op">&lt;</span> <span class="dv">60</span><span class="op">;</span> counter1<span class="op">++)</span> <span class="op">{</span></span>
<span id="lst-listing3-20"><a href="#lst-listing3-20" aria-hidden="true" tabindex="-1"></a>        PORTC <span class="op">=</span> counter1<span class="op">;</span></span>
<span id="lst-listing3-21"><a href="#lst-listing3-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>counter2 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> counter2 <span class="op">&lt;</span> <span class="dv">60</span><span class="op">;</span> counter2<span class="op">++)</span> <span class="op">{</span></span>
<span id="lst-listing3-22"><a href="#lst-listing3-22" aria-hidden="true" tabindex="-1"></a>            PORTB <span class="op">=</span> counter2<span class="op">;</span></span>
<span id="lst-listing3-23"><a href="#lst-listing3-23" aria-hidden="true" tabindex="-1"></a>            delay<span class="op">(</span><span class="dv">1000</span><span class="op">);</span></span>
<span id="lst-listing3-24"><a href="#lst-listing3-24" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="lst-listing3-25"><a href="#lst-listing3-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="lst-listing3-26"><a href="#lst-listing3-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</figure>
</div>
<p>View and download the code from GitHub gist <a href="https://gist.github.com/cpjobling/0dcf2eeb620a1e2228502d67cc1aeb95">counter3.ino</a>.</p>
</section>
</section>
<section id="photographs-of-plug-in-breadboard" class="level2">
<h2 class="anchored" data-anchor-id="photographs-of-plug-in-breadboard">Photographs of Plug-in Breadboard</h2>
<p>The following photographs (<a href="#fig-photor-ex1-1" class="quarto-xref">Figure&nbsp;<span>21.6</span></a> and <a href="#fig-photo-ex1-2" class="quarto-xref">Figure&nbsp;<span>21.7</span></a>) were provided by Dr Davies who created this experiment.</p>
<div id="fig-photor-ex1-1" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Photograph of partially wired prototype board.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-photor-ex1-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/photo1.jpg" class="img-fluid figure-img" alt="Photograph of partially wired prototype board.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-photor-ex1-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.6: Photograph of partially wired prototype board.
</figcaption>
</figure>
</div>
<div id="fig-photo-ex1-2" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Photograph of completed prototype board for experiment 1.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-photo-ex1-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/photo2.jpg" class="img-fluid figure-img" alt="Photograph of completed prototype board for experiment 1.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-photo-ex1-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.7: Photograph of completed prototype board for experiment 1.
</figcaption>
</figure>
</div>


</section>

<p>Copyright © 2021-2024 Swansea University. All rights reserved.</p></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/cpjobling\.github\.io\/eg-151-textbook");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../labs/get_started/index.html" class="pagination-link" aria-label="Getting Started">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Getting Started</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../labs/lab02/index.html" class="pagination-link" aria-label="Experiment 2: Digital Input">
        <span class="nav-page-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Experiment 2: Digital Input</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/cpjobling/eg-151-textbook/edit/main/website/labs/lab01/index.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/cpjobling/eg-151-textbook/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>