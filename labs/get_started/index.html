<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr Timothy Davies">
<meta name="author" content="Dr Chris P. Jobling">
<meta name="dcterms.date" content="2024-10-21">

<title>Getting Started – EG-151 Microcontrollers 2024-2025</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../labs/lab01/index.html" rel="next">
<link href="../../labs/index.html" rel="prev">
<link href="../../logo.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="application/json" class="js-hypothesis-config">
{
  "theme": "clean",
  "openSidebar": false
}
</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../labs/index.html">Microcontroller Programming Laboratory</a></li><li class="breadcrumb-item"><a href="../../labs/get_started/index.html"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Getting Started</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">EG-151 Microcontrollers 2024-2025</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/cpjobling/eg-151-textbook/tree/main/website/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">EG-151 Microcontrollers</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Course Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../intro/course_aims.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Aims</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../intro/course_delivery.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Delivery Method</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../lectures/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Microcontrollers Lectures</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">EG-151 Microcontrollers—Module Staff</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week01/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction to Microcontrollers and Microcontroller Architecture</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/data_representation/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introduction to Data Representation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week02/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Architecture of the Atmel ATmega 328 Microcontroller</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week03/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Introduction to Programming and Program Development</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week04/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Introduction to Programming with C</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week05/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Interfacing to digital I/O with C</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week06/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Interfacing to Analogue I/O with C</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week07/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Introduction to Assembly Language</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week08/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Microcontroller Architecture – Program Operation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lectures/week09/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Addressing Modes</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../lab_intro/intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Laboratory Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/assessment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Assessment of the Laboratory Introduction</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/lab_work.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Laboratory Work in the Department of Electronic and Electrical Engineering</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/lab_instruments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Laboratory Instruments</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/lab_safety.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Laboratory Safety</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/experiment0.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Experiment: to construct an oscillator</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/simulation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Simulation Exercise</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/questions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Questions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/construction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Construction Exercise - Continuity Tester</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lab_intro/soldering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Safe Soldering</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../labs/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Microcontroller Programming Laboratory</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/get_started/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Getting Started</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/lab01/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Experiment 1: Binary Counter</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/lab02/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Experiment 2: Digital Input</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/lab03/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Experiment 3: Analogue to Digital Conversion</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/lab04/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Experiment 4: Arrays</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/lab05/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Experiment 5: LCD Display Panel</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../projects/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mini Projects</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../projects/voltmeter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Voltmeter</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../projects/range_finder.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Ultrasonic Range Finder</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../projects/clock_timer.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Clock Time</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../projects/weather_station.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Weather Station</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../appendix/appendix_a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Other Data Representations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../appendix/programming_in_c.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Programming in C – from nothing to software</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#installing-the-arduino-ide-2-on-your-computer" id="toc-installing-the-arduino-ide-2-on-your-computer" class="nav-link" data-scroll-target="#installing-the-arduino-ide-2-on-your-computer">Installing the Arduino IDE 2 on Your Computer</a>
  <ul class="collapse">
  <li><a href="#windows" id="toc-windows" class="nav-link" data-scroll-target="#windows">Windows</a></li>
  <li><a href="#linux" id="toc-linux" class="nav-link" data-scroll-target="#linux">Linux</a></li>
  <li><a href="#apple-macos" id="toc-apple-macos" class="nav-link" data-scroll-target="#apple-macos">Apple (MacOS)</a></li>
  </ul></li>
  <li><a href="#sec-set-up-arduino" id="toc-sec-set-up-arduino" class="nav-link" data-scroll-target="#sec-set-up-arduino">Initial set up</a></li>
  <li><a href="#the-structure-of-an-arduino-program" id="toc-the-structure-of-an-arduino-program" class="nav-link" data-scroll-target="#the-structure-of-an-arduino-program">The Structure of an Arduino Program</a></li>
  <li><a href="#sec-on-the-blink" id="toc-sec-on-the-blink" class="nav-link" data-scroll-target="#sec-on-the-blink">On the blink</a>
  <ul class="collapse">
  <li><a href="#flowchart-for-blink" id="toc-flowchart-for-blink" class="nav-link" data-scroll-target="#flowchart-for-blink">Flowchart for Blink</a></li>
  <li><a href="#code-for-blink" id="toc-code-for-blink" class="nav-link" data-scroll-target="#code-for-blink">Code for Blink</a></li>
  <li><a href="#compiling-blink" id="toc-compiling-blink" class="nav-link" data-scroll-target="#compiling-blink">Compiling Blink</a></li>
  <li><a href="#uploading-blink" id="toc-uploading-blink" class="nav-link" data-scroll-target="#uploading-blink">Uploading Blink</a></li>
  </ul></li>
  <li><a href="#modifying-blink" id="toc-modifying-blink" class="nav-link" data-scroll-target="#modifying-blink">Modifying Blink</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/cpjobling/eg-151-textbook/edit/main/website/labs/get_started/index.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/cpjobling/eg-151-textbook/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../labs/index.html">Microcontroller Programming Laboratory</a></li><li class="breadcrumb-item"><a href="../../labs/get_started/index.html"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Getting Started</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-getting-started" class="quarto-section-identifier"><span class="chapter-title">Getting Started</span></span></h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Authors</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Dr Timothy Davies </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Department of Electronic and Electrical Engineering
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Dr Chris P. Jobling </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Department of Electronic and Electrical Engineering
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 21, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Microcontrollers are an important topic for the Electronics Engineer. So many modern devices have a microcontroller at their core, even apparently “dumb” products such as toasters and electric fans. Specifying the right microcontroller for a specific task is a useful skill, so in our Electronic and Electrical Engineering degree program you will be exposed to a number of different microcontrollers.</p>
<p>As an introduction to the subject, we shall learn how to program a popular 8-bit microcontroller in the “C” language. The specific microcontroller we shall be using is the Arduino Nano, a low-cost board with a range of useful features. Before we can program it, however, we shall have to install the Arduino Integrated Development Environment (IDE) onto your computer. If you are using one of the PCs in room B107, the software is already installed. The software is free, so you can install it on your own computer if you wish. The IDE has been produced in several versions, which can be run on Linux, Windows, and Apple computers.</p>
<p>A vast amount of information about the Arduino project can be found on their website, <a href="https://arduiono.cc">arduino.cc</a>, including downloads for the IDE. Many of you already have some experience using Arduino harware and software, and so may have the IDE already installed.</p>
<p>Our friends in the Swansea Hackspace have an extensive web site, which also offers guidance on getting started with Arduino projects. Their website can be found at <a href="https://swansea.hackspace.org.uk">swansea.hackspace.org.uk</a>. If you click on “Activities” followed by “Learning” you will be offered a range of tutorials, including one on the Arduino. Click on “Introduction to Arduino” and you will find a detailed description of the device. You may find it useful to read through some of these pages before starting on the installation procedure detailed below.</p>
</section>
<section id="installing-the-arduino-ide-2-on-your-computer" class="level2">
<h2 class="anchored" data-anchor-id="installing-the-arduino-ide-2-on-your-computer">Installing the Arduino IDE 2 on Your Computer</h2>
<section id="windows" class="level3">
<h3 class="anchored" data-anchor-id="windows">Windows</h3>
<p>Modern Windows 10 and 11 machines are capable of finding the necessary driver for the CH340 interface chip automatically. A good strategy would be to start the Windows 10 machine, and when it is ready plug in the Arduino Nano board using the supplied lead. After a few minutes, type Device Manager into the search box, and run the application offered to you. You should see a list of devices, including “Ports (COM and LPT)”. Click on this item and look at the lines following. One of these should read “USB-SERIAL CH340 (COM5)” or similar. Make a note of the COM port number and close the Device Manager.</p>
<p>Next, unplug the Arduino Nano board. Go to <a href="https://arduino.cc">arduino.cc</a> (<a href="#fig-gs-1" class="quarto-xref">Figure&nbsp;<span>20.1</span></a>) and select the tab “Software&amp;rdquo. This will bring up a new page of options (<a href="#fig-gs-2" class="quarto-xref">Figure&nbsp;<span>20.2</span></a>). Move past”Arduino Web Editor” and look at the section titled “Downloads” and the box labelled <strong>Arduino IDE 2.1.1</strong>. Look on the right-hand side and click on “Windows Installer for Windows 10 and newer”, which is the first item in the list. When the installation file has finished downloading return to the previous page using “back” on your browser. In the section marked “Arduino IDE 2.1.1” you will see the words “For more details, please refer to the Arduino IDE 2.0 documentation.” . Click on the link labelled <strong>Arduino IDE 2.0 documentation</strong> to open the <strong>Arduino IDE 2</strong> documentation page (highlighted in <a href="#fig-gs-3" class="quarto-xref">Figure&nbsp;<span>20.3</span></a>) and then select <strong>Downloading and installing the Arduino IDE 2</strong> from the table of contents to open the <strong>Downloading and installing the Arduino IDE 2</strong> page (<a href="#fig-gs-4" class="quarto-xref">Figure&nbsp;<span>20.4</span></a>).</p>
Follow the detailed instructions for Windows to start the installer. There will follow quite a lengthy installation procedure, during which you will be offered additional drivers for other members of the Arduino family, including the boards offered by the company Adafruit. We recommend installing these additional drivers. When the installation is complete, plug in the Arduino Nano board and click on the “Arduino IDE” icon that has appeared on your desktop.
<p></p>
<div id="fig-gs-1" class="quarto-float quarto-figure quarto-figure-center anchored" alt="A screenshot of the web page arduino.cc with software selected in the page menu.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-gs-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/arduino_home.png" class="img-fluid figure-img" alt="A screenshot of the web page arduino.cc with software selected in the page menu.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-gs-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;20.1: The homepage arduino.cc with software selected
</figcaption>
</figure>
</div>
<div id="fig-gs-2" class="quarto-float quarto-figure quarto-figure-center anchored" alt="A screenshot of the software page on arduino.cc with downloads highlighted.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-gs-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/arduino_ide_select.png" class="img-fluid figure-img" alt="A screenshot of the software page on arduino.cc with downloads highlighted.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-gs-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;20.2: The software page on arduino.cc
</figcaption>
</figure>
</div>
<div id="fig-gs-3" class="quarto-float quarto-figure quarto-figure-center anchored" alt="A screenshot of the Arduino IDE 2 page with the link to downloading and installing the Arduiono IDE 2 highlighted.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-gs-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/downloading.png" class="img-fluid figure-img" alt="A screenshot of the Arduino IDE 2 page with the link to downloading and installing the Arduiono IDE 2 highlighted.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-gs-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;20.3: The Arduino IDE 2 page
</figcaption>
</figure>
</div>
<div id="fig-gs-4" class="quarto-float quarto-figure quarto-figure-center anchored" alt="A screenshot of the Arduino IDE 2 downloading and installation instructions page.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-gs-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/install.png" class="img-fluid figure-img" alt="A screenshot of the Arduino IDE 2 downloading and installation instructions page.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-gs-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;20.4: The installation instructions page.
</figcaption>
</figure>
</div>
</section>
<section id="linux" class="level3">
<h3 class="anchored" data-anchor-id="linux">Linux</h3>
<p>Fortunately, all Linux systems have the necessary drivers in place already, so it is only necessary to install the Arduino IDE application.</p>
<p>Go to <a href="https://arduino.cc">arduino.cc</a> and select the tab “Software”. This will bring up the Arduiono IDE 2 page (<a href="#fig-gs-2" class="quarto-xref">Figure&nbsp;<span>20.2</span></a>). Move past the instructions for “Arduino Web Editor” and look at the section titled “Downloads”. In the section marked “Arduino IDE 2.1.1” you will see the words “For more details, please refer to the Arduino IDE 2.0 documentation.” . Click on the link labelled <strong>Arduino IDE 2.0 documentation</strong> to open the <strong>Arduino IDE 2</strong> documentation page (highlighted in <a href="#fig-gs-3" class="quarto-xref">Figure&nbsp;<span>20.3</span></a>`) and then select <strong>Downloading and installing the Arduino IDE 2</strong> from the table of contents to open the <strong>Downloading and installing the Arduino IDE 2</strong> page (<a href="#fig-gs-4" class="quarto-xref">Figure&nbsp;<span>20.4</span></a>). Follow the detailed instructions for Linux to start the installer.</p>
<p>There will follow quite a lengthy installation procedure, involving unpacking the tar file, and running the script “install.sh”, either from the command line or using “Run in terminal” from “Files”. During the installation you will be offered additional drivers for other members of the Arduino family, including the boards offered by the company Adafruit. We recommend installing these additional drivers. When the installation is complete, plug in the Arduino Nano board and click on the “Arduino IDE” icon that has appeared on your desktop.</p>
</section>
<section id="apple-macos" class="level3">
<h3 class="anchored" data-anchor-id="apple-macos">Apple (MacOS)</h3>
<p>Once again, go to <a href="https://arduino.cc">arduino.cc</a> and select the tab “Software”. This will bring up the Arduiono IDE 2 page (<a href="#fig-gs-2" class="quarto-xref">Figure&nbsp;<span>20.2</span></a>). Move past the instructions for “Arduino Web Editor” and look at the section titled “Downloads”. In the section marked “Arduino IDE 2.1.1” you will see the words “For more details, please refer to the Arduino IDE 2.0 documentation.” . Click on the link labelled <strong>Arduino IDE 2.0 documentation</strong> to open the <strong>Arduino IDE 2</strong> documentation page (highlighted in <a href="#fig-gs-3" class="quarto-xref">Figure&nbsp;<span>20.3</span></a>`) and then select <strong>Downloading and installing the Arduino IDE 2</strong> from the table of contents to open the <strong>Downloading and installing the Arduino IDE 2</strong> page (<a href="#fig-gs-4" class="quarto-xref">Figure&nbsp;<span>20.4</span></a>). Follow the detailed instructions for MacOS to start the installer.</p>
</section>
</section>
<section id="sec-set-up-arduino" class="level2">
<h2 class="anchored" data-anchor-id="sec-set-up-arduino">Initial set up</h2>
<p>When you are satisfied that the Arduino IDE has been successfully installed, run the application. Assuming that the installation procedure described above has gone to plan, and after the splash screen, the Arduino IDE main screen (<a href="#fig-gs-5" class="quarto-xref">Figure&nbsp;<span>20.5</span></a>) appears.</p>
<div id="fig-gs-5" class="quarto-float quarto-figure quarto-figure-center anchored" alt="A screen shot of the Arduino IDE 2 as it appears on first start up.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-gs-5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/arduino_ide.png" class="img-fluid figure-img" alt="A screen shot of the Arduino IDE 2 as it appears on first start up.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-gs-5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;20.5: The Ardino IDE 2 Main Screen on First Run
</figcaption>
</figure>
</div>
<p>Plug in the Arduino Nano board (<a href="#fig-gs-6" class="quarto-xref">Figure&nbsp;<span>20.6</span></a>) using the supplied lead. Next look at the dropdown control labelled <strong>Select Board</strong>. Identify the connection which depends on your operating system but will be identified as a USB connection on MacOS and Linux, or may be labelled COM 5 (or some other number) on Windows (see <a href="#fig-gs-7" class="quarto-xref">Figure&nbsp;<span>20.7</span></a>).</p>
<div id="fig-gs-6" class="quarto-float quarto-figure quarto-figure-center anchored" alt="The Arduino nano microntroller mounted on breadboard.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-gs-6-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/arduino_nano_breadboard.png" class="img-fluid figure-img" alt="The Arduino nano microntroller mounted on breadboard.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-gs-6-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;20.6: The Arduino nano microntroller mounted on breadboard
</figcaption>
</figure>
</div>
<div id="fig-gs-7" class="quarto-float quarto-figure quarto-figure-center anchored" alt="The select port dialogue when setting up the Arduino IDE 2 to use the plugged in Adrduiono nano board.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-gs-7-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/choose_port.png" class="img-fluid figure-img" alt="The select port dialogue when setting up the Arduino IDE 2 to use the plugged in Adrduiono nano board.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-gs-7-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;20.7: Choose the port that your nano board is connected on. What you will see here depends on your operating system. I have shown what I see on my MacOS machine.
</figcaption>
</figure>
</div>
<p>Once you have selected the correct port, you need to identify the board you are using. Search for nano as shown in <a href="#fig-gs-8" class="quarto-xref">Figure&nbsp;<span>20.8</span></a>.</p>
<div id="fig-gs-8" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Shows the slect board dialogue. We have seached for nano and will the the offered selection 'Ardunino Nano'">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-gs-8-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/select_board.png" class="img-fluid figure-img" alt="Shows the slect board dialogue. We have seached for nano and will the the offered selection 'Ardunino Nano'">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-gs-8-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;20.8: Search for and select Arduino Nano.
</figcaption>
</figure>
</div>
<p>Once you have set up your board, the board idenitfier changes to <strong>Arduino Nano</strong> in the menu bar as shown in <a href="#fig-gs-9" class="quarto-xref">Figure&nbsp;<span>20.9</span></a>. You are now ready to compile your first program.</p>
<div id="fig-gs-9" class="quarto-float quarto-figure quarto-figure-center anchored" alt="A screenshot of the Arduino IDE 2 fater it has been connected to the Arduino nano board.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-gs-9-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/nano_ready.png" class="img-fluid figure-img" alt="A screenshot of the Arduino IDE 2 fater it has been connected to the Arduino nano board.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-gs-9-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;20.9: Arduino IDE 2 set up and ready to go.
</figcaption>
</figure>
</div>
</section>
<section id="the-structure-of-an-arduino-program" class="level2">
<h2 class="anchored" data-anchor-id="the-structure-of-an-arduino-program">The Structure of an Arduino Program</h2>
<p>Arduino provides a useful program stucture that is called a <em>sketch</em>. The structure of a sketch is illustrated in <a href="#fig-lab0-sketch-flow" class="quarto-xref">Figure&nbsp;<span>20.10</span></a>.</p>
<div id="fig-lab0-sketch-flow" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Flow-chart of an Ardunino sketch program.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-lab0-sketch-flow-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/sketch-flow.png" class="img-fluid figure-img" style="width:50.0%" alt="Flow-chart of an Ardunino sketch program.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-lab0-sketch-flow-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;20.10: Flow-chart of an Ardunino sketch program
</figcaption>
</figure>
</div>
<p>After the program starts, the <em>setup</em> subprocess (subroutine) is called once, and then the <em>loop</em> subprocess is called over and over again until the processor is restarted or power removed. Note there is no <em>end</em> state for the sketch program.</p>
<p>In the <em>setup</em> subprocess, the microcontroller will be set up for the application it is to execute. In the labs to follow, this will be to ensure that the IO is correctly configured.</p>
<p>In the <em>loop</em> process, we will set up the activities that will read inputs from the IO and provide suitable outputs. We will provide flow-charts for the examples that follow and you are expectd to provide flow diagrams for any modified programs in your lab diary.</p>
<p>You may wish to note that I used PowerPoint flowchart shape library to draw the flowcharts in this document.</p>
</section>
<section id="sec-on-the-blink" class="level2">
<h2 class="anchored" data-anchor-id="sec-on-the-blink">On the blink</h2>
<p>The first program we shall run rejoices in the unlikely name of Blink. Click on <code>File</code> and select <code>Examples</code> from the drop-down menu. A further menu appears, with all the example programs. Select <code>01.Basics</code>, followed by <code>Blink</code> (<a href="#fig-gs-10" class="quarto-xref">Figure&nbsp;<span>20.11</span></a>).</p>
<div id="fig-gs-10" class="quarto-float quarto-figure quarto-figure-center anchored" alt="A screenshot the Arduino IDE 2 will Files> Examples> 01.Basiscs> Blink highlighted.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-gs-10-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/select_blink.png" class="img-fluid figure-img" alt="A screenshot the Arduino IDE 2 will Files> Examples> 01.Basiscs> Blink highlighted.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-gs-10-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;20.11: Select the blink example.
</figcaption>
</figure>
</div>
<p>Select <code>Blink</code>. The program appears in a new IDE window (<a href="#fig-gs-11" class="quarto-xref">Figure&nbsp;<span>20.12</span></a>`). The program at this stage is just text. It needs to be compiled in order to create an executable file.</p>
<div id="fig-gs-11" class="quarto-float quarto-figure quarto-figure-center anchored" alt="A screenshot the Arduino IDE 2 with the example blink program loaded as blinck.ino.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-gs-11-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/blink_prog.png" class="img-fluid figure-img" alt="A screenshot the Arduino IDE 2 with the example blink program loaded as blinck.ino.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-gs-11-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;20.12: Blink program (Arduino sketch blink.ino) loaded in the Arduino IDE 2.
</figcaption>
</figure>
</div>
<section id="flowchart-for-blink" class="level3">
<h3 class="anchored" data-anchor-id="flowchart-for-blink">Flowchart for Blink</h3>
<p>The flowcharts for the blink program are shown in <a href="#fig-blink-setup" class="quarto-xref">Figure&nbsp;<span>20.13</span></a> and <a href="#fig-blink-loop" class="quarto-xref">Figure&nbsp;<span>20.14</span></a>. These are the contents of the Arduino sketch suprocesses <em>setup</em> and <em>loop</em> shown in <a href="#fig-lab0-sketch-flow" class="quarto-xref">Figure&nbsp;<span>20.10</span></a>.</p>
<p>In <em>setup</em> (<a href="#fig-blink-setup" class="quarto-xref">Figure&nbsp;<span>20.13</span></a>), the pin that is connected to the built-in on-board LED (<code>LED_BUILTIN</code>), is setup as an output<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</p>
<div id="fig-blink-setup" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Flow-chart for the setup sub-process for the blink program.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-blink-setup-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/blink-setup.png" class="img-fluid figure-img" style="width:25.0%" alt="Flow-chart for the setup sub-process for the blink program.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-blink-setup-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;20.13: Flow-chart for the <em>setup</em> sub-process for <em>blink</em>
</figcaption>
</figure>
</div>
<p>In <em>loop</em> (<a href="#fig-blink-loop" class="quarto-xref">Figure&nbsp;<span>20.14</span></a>), the built-in LED is turned on as indicated by the I/O block. There is then a one second (1000 ms) delay indicated by the first subprocess. The built-in LED is then turned off, and there is another 1 second delay. Because the whole of the <em>loop</em> sub-process ends at this point, the return to the top of the sub-process shown in <a href="#fig-lab0-sketch-flow" class="quarto-xref">Figure&nbsp;<span>20.10</span></a> means that the whole process is repeated. The effect is that the LED will “blink” at the rate of 1 second on and 1 second off.</p>
<div id="fig-blink-loop" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Flow-chart for the loop sub-process for the blink program.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-blink-loop-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="pictures/blink-loop.png" class="img-fluid figure-img" style="width:25.0%" alt="Flow-chart for the loop sub-process for the blink program.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-blink-loop-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;20.14: Flow-chart for the <em>loop</em> sub-process for <em>blink</em>
</figcaption>
</figure>
</div>
</section>
<section id="code-for-blink" class="level3">
<h3 class="anchored" data-anchor-id="code-for-blink">Code for Blink</h3>
<p>The code for <em>blink</em> is reproduced below in <a href="#lst-lab0-blink" class="quarto-xref">Listing&nbsp;<span>20.1</span></a>. It is clear how the program represented by the flow-charts in <a href="../../lectures/week02/index.html#fig-week02-arduino-nano" class="quarto-xref">Figure&nbsp;<span>3.12</span></a>, <a href="#fig-blink-setup" class="quarto-xref">Figure&nbsp;<span>20.13</span></a> and <a href="#fig-blink-loop" class="quarto-xref">Figure&nbsp;<span>20.14</span></a> are turned into subroutine calls in the ‘C’-program. Note that much of the code is comments</p>
<div id="lst-lab0-blink" class="c listing quarto-float quarto-figure quarto-figure-left anchored" data-code-line-numbers="true">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-lab0-blink-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;20.1: Blink program courtesy of the built-in <a href="https://www.arduino.cc/en/Tutorial/BuiltInExamples/Blink">Blink</a>
</figcaption>
<div aria-describedby="lst-lab0-blink-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-lab0-blink" data-code-line-numbers="true"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="lst-lab0-blink-1"><a href="#lst-lab0-blink-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="lst-lab0-blink-2"><a href="#lst-lab0-blink-2" aria-hidden="true" tabindex="-1"></a><span class="co">  Blink</span></span>
<span id="lst-lab0-blink-3"><a href="#lst-lab0-blink-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-lab0-blink-4"><a href="#lst-lab0-blink-4" aria-hidden="true" tabindex="-1"></a><span class="co">  Turns an LED on for one second, then off for one second, repeatedly.</span></span>
<span id="lst-lab0-blink-5"><a href="#lst-lab0-blink-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-lab0-blink-6"><a href="#lst-lab0-blink-6" aria-hidden="true" tabindex="-1"></a><span class="co">  Most Arduinos have an on-board LED you can control. On the UNO, MEGA and ZERO</span></span>
<span id="lst-lab0-blink-7"><a href="#lst-lab0-blink-7" aria-hidden="true" tabindex="-1"></a><span class="co">  it is attached to digital pin 13, on MKR1000 on pin 6. LED_BUILTIN is set to</span></span>
<span id="lst-lab0-blink-8"><a href="#lst-lab0-blink-8" aria-hidden="true" tabindex="-1"></a><span class="co">  the correct LED pin independent of which board is used.</span></span>
<span id="lst-lab0-blink-9"><a href="#lst-lab0-blink-9" aria-hidden="true" tabindex="-1"></a><span class="co">  If you want to know what pin the on-board LED is connected to on your Arduino</span></span>
<span id="lst-lab0-blink-10"><a href="#lst-lab0-blink-10" aria-hidden="true" tabindex="-1"></a><span class="co">  model, check the Technical Specs of your board at:</span></span>
<span id="lst-lab0-blink-11"><a href="#lst-lab0-blink-11" aria-hidden="true" tabindex="-1"></a><span class="co">  https://www.arduino.cc/en/Main/Products</span></span>
<span id="lst-lab0-blink-12"><a href="#lst-lab0-blink-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-lab0-blink-13"><a href="#lst-lab0-blink-13" aria-hidden="true" tabindex="-1"></a><span class="co">  modified 8 May 2014</span></span>
<span id="lst-lab0-blink-14"><a href="#lst-lab0-blink-14" aria-hidden="true" tabindex="-1"></a><span class="co">  by Scott Fitzgerald</span></span>
<span id="lst-lab0-blink-15"><a href="#lst-lab0-blink-15" aria-hidden="true" tabindex="-1"></a><span class="co">  modified 2 Sep 2016</span></span>
<span id="lst-lab0-blink-16"><a href="#lst-lab0-blink-16" aria-hidden="true" tabindex="-1"></a><span class="co">  by Arturo Guadalupi</span></span>
<span id="lst-lab0-blink-17"><a href="#lst-lab0-blink-17" aria-hidden="true" tabindex="-1"></a><span class="co">  modified 8 Sep 2016</span></span>
<span id="lst-lab0-blink-18"><a href="#lst-lab0-blink-18" aria-hidden="true" tabindex="-1"></a><span class="co">  by Colby Newman</span></span>
<span id="lst-lab0-blink-19"><a href="#lst-lab0-blink-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-lab0-blink-20"><a href="#lst-lab0-blink-20" aria-hidden="true" tabindex="-1"></a><span class="co">  This example code is in the public domain.</span></span>
<span id="lst-lab0-blink-21"><a href="#lst-lab0-blink-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-lab0-blink-22"><a href="#lst-lab0-blink-22" aria-hidden="true" tabindex="-1"></a><span class="co">  https://www.arduino.cc/en/Tutorial/BuiltInExamples/Blink</span></span>
<span id="lst-lab0-blink-23"><a href="#lst-lab0-blink-23" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span>
<span id="lst-lab0-blink-24"><a href="#lst-lab0-blink-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-lab0-blink-25"><a href="#lst-lab0-blink-25" aria-hidden="true" tabindex="-1"></a><span class="co">// the setup function runs once when you press reset or power the board</span></span>
<span id="lst-lab0-blink-26"><a href="#lst-lab0-blink-26" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> setup<span class="op">()</span> <span class="op">{</span></span>
<span id="lst-lab0-blink-27"><a href="#lst-lab0-blink-27" aria-hidden="true" tabindex="-1"></a>  <span class="co">// initialize digital pin LED_BUILTIN as an output.</span></span>
<span id="lst-lab0-blink-28"><a href="#lst-lab0-blink-28" aria-hidden="true" tabindex="-1"></a>  pinMode<span class="op">(</span>LED_BUILTIN<span class="op">,</span> OUTPUT<span class="op">);</span></span>
<span id="lst-lab0-blink-29"><a href="#lst-lab0-blink-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="lst-lab0-blink-30"><a href="#lst-lab0-blink-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="lst-lab0-blink-31"><a href="#lst-lab0-blink-31" aria-hidden="true" tabindex="-1"></a><span class="co">// the loop function runs over and over again forever</span></span>
<span id="lst-lab0-blink-32"><a href="#lst-lab0-blink-32" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> loop<span class="op">()</span> <span class="op">{</span></span>
<span id="lst-lab0-blink-33"><a href="#lst-lab0-blink-33" aria-hidden="true" tabindex="-1"></a>  digitalWrite<span class="op">(</span>LED_BUILTIN<span class="op">,</span> HIGH<span class="op">);</span>  <span class="co">// turn the LED on (HIGH is the voltage level)</span></span>
<span id="lst-lab0-blink-34"><a href="#lst-lab0-blink-34" aria-hidden="true" tabindex="-1"></a>  delay<span class="op">(</span><span class="dv">1000</span><span class="op">);</span>                      <span class="co">// wait for a second</span></span>
<span id="lst-lab0-blink-35"><a href="#lst-lab0-blink-35" aria-hidden="true" tabindex="-1"></a>  digitalWrite<span class="op">(</span>LED_BUILTIN<span class="op">,</span> LOW<span class="op">);</span>   <span class="co">// turn the LED off by making the voltage LOW</span></span>
<span id="lst-lab0-blink-36"><a href="#lst-lab0-blink-36" aria-hidden="true" tabindex="-1"></a>  delay<span class="op">(</span><span class="dv">1000</span><span class="op">);</span>                      <span class="co">// wait for a second</span></span>
<span id="lst-lab0-blink-37"><a href="#lst-lab0-blink-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</figure>
</div>
</section>
<section id="compiling-blink" class="level3">
<h3 class="anchored" data-anchor-id="compiling-blink">Compiling Blink</h3>
<p>Identify the icon for compiling the program, this is a tick in a blue circle which is called Verify on the Arduino IDE. Click this once, and after a short period of time the message “Done compiling” should appear near the bottom of the window. Hopefully, as we are compiling an example program, there will be no errors! If there are errors, information on the type of error and where it has occurred in the program can be found in the dialogue box near the bottom of the window.</p>
</section>
<section id="uploading-blink" class="level3">
<h3 class="anchored" data-anchor-id="uploading-blink">Uploading Blink</h3>
<p>Next, we need to transfer the executable file to the Arduino Nano board. This is done by identifying the icon Upload, which is a right arrow in a blue circle, and clicking it once. Annoyingly, the IDE insists on re-compiling the program. If all has gone to plan, the message “Done Uploading” appears. Then after a few seconds the executable file starts running on the Nano board. One of the LEDs begins flashing at a regular rate, one second on, one second off.</p>
</section>
</section>
<section id="modifying-blink" class="level2">
<h2 class="anchored" data-anchor-id="modifying-blink">Modifying Blink</h2>
<p>So far, so good.</p>
<p>Now, let us try changing the program. Look at the text screen, the “source code”. You will find two instances of the instruction <code>delay(1000)</code>.</p>
<p>Move the cursor and change the argument of the two instructions to <code>100</code>. Now, with your new-found knowledge, re-compile the program and upload it to the Nano.</p>
<p>When the message “Done Uploading” appears, look at the LED on the Nano. It should be flashing at ten times the previous rate.</p>
<p>Congratulations! You have successfully edited the program.</p>
<p>You should save the edited program by clicking on File, selecting “Save As” and when the dialogue appears, give the program a new name, for example “myblink”.</p>
<p>How would you change the flow chart in <a href="#fig-blink-loop" class="quarto-xref">Figure&nbsp;<span>20.14</span></a> to document the change you made in the code? Put a copy of your modified flow-chart and a code listing in your lab diary. You will find a copy of the PowerPoint that we used to create the flow charts in this chapter on-line by following this link: <a href="https://github.com/cpjobling/eg-151-textbook/blob/main/website/labs/get_started/pictures/flow-charts.pptx">eg-151-textbook/website/labs/get_started/pictures/flow-charts.pptx</a>. You can use the diagrams in that PowerPoint file as a template for your own flow-charts.</p>
<p>You are now ready to attempt the first laboratory exercise: <a href="../lab01/index.html" class="quarto-xref"><span>Experiment 1: Binary Counter</span></a>.</p>


</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>The built-in LED on the Arduino Nano board is connected to digital pin 13 which is GPIO pin 5 on port B. This port is <em>not</em> connected to any of the pins that come out of the Ardino Nano board (see <a href="../../lectures/week02/index.html#fig-week02-arduino-nano" class="quarto-xref">Figure&nbsp;<span>3.12</span></a>) and are available for connection to external I/O devices.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

<p>Copyright © 2021-2024 Swansea University. All rights reserved.</p></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/cpjobling\.github\.io\/eg-151-textbook");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../labs/index.html" class="pagination-link" aria-label="Microcontroller Programming Laboratory">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Microcontroller Programming Laboratory</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../labs/lab01/index.html" class="pagination-link" aria-label="Experiment 1: Binary Counter">
        <span class="nav-page-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Experiment 1: Binary Counter</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/cpjobling/eg-151-textbook/edit/main/website/labs/get_started/index.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/cpjobling/eg-151-textbook/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>